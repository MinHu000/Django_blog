{% extends "base.html" %}

{% block title %}ì‚½ì§ˆ ë¡œê·¸{% endblock %}

{% block content %}

<!-- ğŸ° Sandcastles : í˜ì´ì§€ ìƒë‹¨ ë‹¨ 1íšŒ -->
<div class="sandcastle-card mb-5">
  <div class="sandcastle-head">
    <div class="sandcastle-title">$ sandcastles</div>
    <div class="sandcastle-meta">
      total: {{ sandcastle_count }}
    </div>
  </div>

<div class="sandcastle-grid">
  {% for _ in ""|ljust:sandcastle_count %}
    <div class="castle">
      {% if forloop.counter <= 9 %}
        ğŸ°
      {% elif forloop.counter <= 19 %}
        ğŸ¯
      {% else %}
        ğŸ›ï¸
      {% endif %}
    </div>
  {% endfor %}
</div>


  <div class="sandcastle-hint">
    * ì‚½ì§ˆ ë¡œê·¸ í•˜ë‚˜ë‹¹ ëª¨ë˜ì„± í•˜ë‚˜ê°€ ìŒ“ì¸ë‹¤.
  </div>
</div>

<!-- í˜ì´ì§€ í—¤ë” -->
<div class="mb-4">
  <h2>ğŸ›  ì‚½ì§ˆ ë¡œê·¸</h2>
  <p class="meta">
    ê°œë°œ ì¤‘ ë§ˆì£¼ì¹œ ë¬¸ì œì™€ í•´ê²° ê³¼ì •ì„ ê¸°ë¡í•©ë‹ˆë‹¤.
  </p>
</div>

<!-- ì‚½ì§ˆ ë¡œê·¸ ëª©ë¡ -->
<div class="grid">
  {% for post in posts %}
  <div class="card">

    <!-- Category Badge -->
    <span class="badge badge-debug mb-2">ì‚½ì§ˆ ë¡œê·¸</span>

    <!-- Title -->
    <h3>{{ post.title }}</h3>

    <!-- Meta -->
    <div class="meta">
      {{ post.created_at|date:"Y.m.d" }}
      {% if post.sub_category %}
        Â· {{ post.sub_category }}
      {% endif %}
    </div>

    <!-- Preview -->
    <p>
      {{ post.content|truncatechars:120 }}
    </p>

    <!-- ë²„íŠ¼ ì˜ì—­ -->
    <div class="project-actions"
         style="display:flex; gap:12px; align-items:center; margin-top:16px;">

      <a href="{% url 'debug_detail' post.id %}"
         class="btn btn-primary">
        í•´ê²° ê³¼ì • ë³´ê¸° â†’
      </a>

      {% if user.is_staff %}
      <a href="{% url 'post_delete' post.id %}"
         class="btn btn-delete"
         onclick="return confirm('ì •ë§ ì‚­ì œí• ê¹Œìš”?');">
        ğŸ—‘ ì‚­ì œ
      </a>
      {% endif %}

    </div>

  </div>
  {% empty %}
  <p>ì•„ì§ ë“±ë¡ëœ ì‚½ì§ˆ ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
  {% endfor %}
</div>

{% endblock %}
