{% extends "blog/base.html" %}
{% block title %}ì‚½ì§ˆ ë¡œê·¸{% endblock %}

{% block content %}
<div class="mb-4">
  <h2>ğŸ›  ì‚½ì§ˆ ë¡œê·¸</h2>
  <p class="meta">
    ê°œë°œ ì¤‘ ë§ˆì£¼ì¹œ ë¬¸ì œì™€ í•´ê²° ê³¼ì •ì„ ê¸°ë¡í•©ë‹ˆë‹¤.
  </p>
</div>

<div class="grid">
  {% for post in posts %}
  <div class="card">

    <!-- Category Badge -->
    <span class="badge badge-debug mb-2">ì‚½ì§ˆ ë¡œê·¸</span>

    <!-- Title -->
    <h3>{{ post.title }}</h3>

    <!-- Meta -->
    <div class="meta">
      {{ post.created_at|date:"Y.m.d" }}
      {% if post.sub_category %}
        Â· {{ post.sub_category }}
      {% endif %}
    </div>

    <!-- Preview -->
    <p>
      {{ post.content|truncatechars:120 }}
    </p>

    <!-- ğŸ”¥ ë²„íŠ¼ ì˜ì—­ (ë‹¤ë¥¸ í˜ì´ì§€ì™€ ë™ì¼ êµ¬ì¡°) -->
    <div class="project-actions"
         style="display:flex; gap:12px; align-items:center; margin-top:16px;">

      <!-- ìƒì„¸ ë³´ê¸° -->
      <a href="{% url 'debug_detail' post.id %}"
         class="btn btn-primary">
        í•´ê²° ê³¼ì • ë³´ê¸° â†’
      </a>

      <!-- ì‚­ì œ ë²„íŠ¼ (a íƒœê·¸ë¡œ í†µì¼) -->
      {% if user.is_staff %}
      <a href="{% url 'post_delete' post.id %}"
         class="btn btn-delete"
         onclick="return confirm('ì •ë§ ì‚­ì œí• ê¹Œìš”?');">
        ğŸ—‘ ì‚­ì œ
      </a>
      {% endif %}

    </div>
    
  </div>
  {% empty %}
  <p>ì•„ì§ ë“±ë¡ëœ ì‚½ì§ˆ ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
  {% endfor %}
</div>
{% endblock %}
